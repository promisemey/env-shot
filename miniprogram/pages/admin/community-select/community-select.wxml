<!--pages/admin/community-select/community-select.wxml-->
<view class="community-select-container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-bar">
      <input 
        class="search-input" 
        placeholder="æœç´¢ç¤¾åŒºåç§°æˆ–åœ°å€" 
        value="{{searchKeyword}}" 
        bindinput="onSearchInput"
      />
      <view class="search-btn" bindtap="searchCommunities">
        <text class="search-icon">ğŸ”</text>
      </view>
    </view>
  </view>

  <!-- ç¤¾åŒºåˆ—è¡¨ -->
  <view class="community-list">
    <view class="list-header">
      <text class="list-title">ç¤¾åŒºåˆ—è¡¨</text>
      <text class="list-count">å…±{{communities.length}}ä¸ªç¤¾åŒº</text>
    </view>

    <view class="community-item" wx:for="{{communities}}" wx:key="id" bindtap="selectCommunity" data-community="{{item}}">
      <view class="community-info">
        <text class="community-name">{{item.name}}</text>
        <text class="community-address">{{item.address}}</text>
        <text class="community-desc" wx:if="{{item.description}}">{{item.description}}</text>
      </view>
      
      <view class="community-actions">
        <view class="action-btn" bindtap="viewCommunityDetail" data-id="{{item.id}}" catchtap="true">
          <text class="action-text">è¯¦æƒ…</text>
        </view>
        <view class="select-btn {{selectedCommunityId === item.id ? 'selected' : ''}}">
          <text class="select-text">{{selectedCommunityId === item.id ? 'å·²é€‰æ‹©' : 'é€‰æ‹©'}}</text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{communities.length === 0}}">
      <text class="empty-icon">ğŸ˜ï¸</text>
      <text class="empty-text">æš‚æ— ç¤¾åŒºæ•°æ®</text>
      <text class="empty-desc">è¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜æ·»åŠ ç¤¾åŒºä¿¡æ¯</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-actions" wx:if="{{selectedCommunityId}}">
    <button class="confirm-btn" bindtap="confirmSelection">ç¡®è®¤é€‰æ‹©</button>
  </view>
</view>
