<!--pages/admin/community-select/community-select.wxml-->
<view class="community-select-container">
  <!-- 搜索栏 -->
  <view class="search-section">
    <view class="search-bar">
      <t-icon name="search" size="28rpx" color="#666"></t-icon>
      <input class="search-input" placeholder="搜索社区名称或地址" value="{{searchKeyword}}" bindinput="onSearchInput" />
      <view class="clear-btn" wx:if="{{searchKeyword}}" bindtap="onSearchInput">
        <t-icon name="close-circle" size="24rpx" color="#ccc"></t-icon>
      </view>
    </view>
  </view>

  <!-- 社区列表 -->
  <view class="community-list">
    <view class="list-header">
      <view class="header-content">
        <t-icon name="location" size="28rpx" color="#1296db"></t-icon>
        <text class="list-title">社区列表</text>
      </view>
      <text class="list-count">共{{filteredCommunities.length}}个社区</text>
    </view>

    <view class="community-item {{selectedCommunityId === item.id ? 'selected' : ''}}" wx:for="{{filteredCommunities}}" wx:key="id" bindtap="selectCommunity" data-community="{{item}}">
      <view class="community-info">
        <view class="community-header">
          <text class="community-name">{{item.name}}</text>
          <view class="select-indicator" wx:if="{{selectedCommunityId === item.id}}">
            <t-icon name="check-circle" size="32rpx" color="#1296db"></t-icon>
          </view>
        </view>
        <text class="community-address">{{item.address}}</text>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{filteredCommunities.length === 0}}">
      <view class="empty-icon">
        <t-icon name="location" size="120rpx" color="#e8e8e8"></t-icon>
      </view>
      <text class="empty-text">暂无匹配的社区</text>
      <text class="empty-desc">请尝试修改搜索关键词</text>
    </view>
  </view>

  <!-- 底部操作栏 -->
  <view class="bottom-actions" wx:if="{{selectedCommunityId}}">
    <button class="confirm-btn" bindtap="confirmSelection">
      <t-icon name="check" size="24rpx" color="#ffffff"></t-icon>
      <text class="btn-text">确认选择</text>
    </button>
  </view>
</view>