<!--pages/login/login.wxml-->
<view class="page-container">
  <view class="login-header">
    <view class="logo-wrapper">
      <view class="logo-bg">
        <t-image src="/assets/images/logo.png" shape="round" error="slot" width="72" height="72">
      <text class="error-text" slot="error">加载失败</text>
    </t-image>
        
      </view>
    </view>
    <text class="title">社区环境管理</text>
    <text class="subtitle">共建美好家园</text>
  </view>

  <view class="login-form">
    <view class="form-card">
      <view class="form-header">
        <t-icon name="user" size="48rpx" color="var(--td-brand-color)"></t-icon>
        <text class="form-title">欢迎登录</text>
      </view>

      <view class="form-fields">
        <view class="field-item">
          <view class="field-label">
            <t-icon name="mobile" size="24rpx" color="var(--td-brand-color)"></t-icon>
            <text class="label-text">手机号</text>
          </view>
          <view class="field-input">
            <t-input type="number" placeholder="请输入手机号" value="{{phone}}" bindchange="onPhoneInput" maxlength="11" clearable="{{true}}" class="input-field" />
          </view>
        </view>

        <view class="field-item">
          <view class="field-label">
            <t-icon name="lock-on" size="24rpx" color="var(--td-brand-color)"></t-icon>
            <text class="label-text">验证码</text>
          </view>
          <view class="field-input code-input">
            <t-input type="number" placeholder="请输入验证码" value="{{code}}" bindchange="onCodeInput" maxlength="6" clearable="{{true}}" class="input-field" />
            <view class="code-btn" bindtap="sendCode">
              <text class="code-btn-text">{{codeBtnText}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 登录说明 -->
      <view class="login-tips">
        <view class="tip-item">
          <t-icon name="user" size="24rpx" color="#52c41a"></t-icon>
          <text class="tip-text">管理员：138开头的手机号</text>
        </view>
        <view class="tip-item">
          <t-icon name="home" size="24rpx" color="#1890ff"></t-icon>
          <text class="tip-text">普通用户：其他手机号</text>
        </view>
        <view class="tip-item">
          <t-icon name="info-circle" size="24rpx" color="#faad14"></t-icon>
          <text class="tip-text">验证码：任意6位数字</text>
        </view>
      </view>
      <t-button theme="primary" size="large" bindtap="login" class="form-actions" >登录</t-button>
      
      <!-- 微信一键登录 -->
      <view class="wechat-login-section">
        <view class="divider">
          <view class="divider-line"></view>
          <text class="divider-text">或</text>
          <view class="divider-line"></view>
        </view>
        <button 
          class="wechat-login-btn"
          open-type="getUserInfo"
          bindgetuserinfo="onGetUserInfo"
          disabled="{{wechatLoginDisabled}}"
        >
          <view class="wechat-btn-content">
            <t-icon name="logo-wechat" size="32rpx" color="#07c160"></t-icon>
            <text class="wechat-btn-text">{{wechatLoginText}}</text>
          </view>
        </button>
      </view>
    </view>
  </view>

  <view class="login-footer">
    <text class="tips">登录即表示同意</text>
    <text class="link" bindtap="showPrivacy">《隐私政策》</text>
    <text class="tips">和</text>
    <text class="link" bindtap="showTerms">《服务条款》</text>
  </view>
</view>