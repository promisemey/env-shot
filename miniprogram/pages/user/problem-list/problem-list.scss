/* pages/user/problem-list/problem-list.scss */
.page-container {
  min-height: 100vh;
  background: var(--td-gray-color-1);
  padding-bottom: calc(120rpx + env(safe-area-inset-bottom));
}

/* 筛选区域 */
.filter-section {
  background: #ffffff;
  padding: 24rpx 20rpx 0;
  margin: 20rpx 20rpx 32rpx;
  border-radius: var(--td-radius-large);
  box-shadow: var(--td-shadow-1);
  
  .filter-header {
    margin-bottom: 24rpx;
    
    .filter-title {
      display: flex;
      align-items: center;
      
      .title {
        font-size: 28rpx;
        font-weight: 600;
        color: var(--td-gray-color-6);
        margin-left: 12rpx;
      }
    }
  }
  
  .filter-tabs {
    display: flex;
    position: relative;
    
    .filter-tab {
      flex: 1;
      text-align: center;
      padding: 20rpx 16rpx;
      position: relative;
      transition: all 0.3s ease;
      background: transparent;
      border-radius: var(--td-radius-medium);
      
      .tab-text {
        font-size: 26rpx;
        color: var(--td-gray-color-4);
        transition: all 0.3s ease;
      }
      
      .tab-indicator {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 60rpx;
        height: 4rpx;
        background: var(--td-brand-color);
        border-radius: 2rpx;
      }
      
      &.active {
        background: var(--td-brand-color-1);
        
        .tab-text {
          color: var(--td-brand-color);
          font-weight: 600;
        }
      }
    }
  }
}

/* 问题列表 */
.problem-list {
  padding: 0 20rpx;
  
  .problem-item {
    background: #ffffff;
    border-radius: var(--td-radius-large);
    padding: 32rpx;
    margin-bottom: 24rpx;
    box-shadow: var(--td-shadow-1);
    transition: all 0.3s ease;
    
    &:active {
      transform: translateY(2rpx);
      box-shadow: var(--td-shadow-2);
    }
    
    .problem-header {
      display: flex;
      align-items: flex-start;
      margin-bottom: 20rpx;
      
      .problem-icon {
        margin-right: 16rpx;
        margin-top: 4rpx;
      }
      
      .problem-title-wrapper {
        flex: 1;
        
        .problem-title {
          display: block;
          font-size: 30rpx;
          font-weight: 600;
          color: var(--td-gray-color-6);
          line-height: 1.4;
          margin-bottom: 12rpx;
        }
        
        .problem-status-badge {
          display: inline-flex;
          align-items: center;
          padding: 8rpx 16rpx;
          border-radius: 20rpx;
          
          .status-text {
            font-size: 22rpx;
            color: #ffffff;
            margin-left: 6rpx;
          }
          
          &.pending {
            background: var(--td-warning-color);
          }
          
          &.processing {
            background: var(--td-brand-color);
          }
          
          &.fixed {
            background: var(--td-success-color);
          }
          
          &.closed {
            background: var(--td-gray-color-4);
          }
        }
      }
    }
    
    .problem-desc {
      display: block;
      font-size: 26rpx;
      color: var(--td-gray-color-4);
      line-height: 1.5;
      margin-bottom: 20rpx;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }
    
    .problem-meta {
      margin-bottom: 20rpx;
      
      .meta-row {
        display: flex;
        gap: 32rpx;
      }
      
      .meta-item {
        display: flex;
        align-items: center;
        
        .meta-label {
          font-size: 22rpx;
          color: var(--td-gray-color-4);
          margin: 0 8rpx 0 8rpx;
        }
        
        .meta-value {
          font-size: 22rpx;
          color: var(--td-gray-color-5);
          
          &.severity-low {
            color: var(--td-success-color);
          }
          
          &.severity-medium {
            color: var(--td-warning-color);
          }
          
          &.severity-high {
            color: var(--td-error-color);
          }
        }
      }
    }
    
    .problem-photos {
      margin-bottom: 20rpx;
      
      .photos-grid {
        display: flex;
        gap: 12rpx;
        
        .photo-item {
          position: relative;
          width: 120rpx;
          height: 120rpx;
          border-radius: var(--td-radius-medium);
          overflow: hidden;
          
          image {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }
          
          .photo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            
            .more-count {
              font-size: 24rpx;
              color: #ffffff;
              font-weight: 600;
            }
          }
        }
      }
    }
    
    .problem-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      
      .footer-left {
        display: flex;
        align-items: center;
        
        .problem-time {
          font-size: 22rpx;
          color: var(--td-gray-color-4);
          margin-left: 8rpx;
        }
      }
      
      .footer-right {
        display: flex;
        align-items: center;
        gap: 16rpx;
        
        .action-btn {
          display: flex;
          align-items: center;
          padding: 8rpx 16rpx;
          background: var(--td-success-color-1);
          border-radius: 20rpx;
          border: 1rpx solid var(--td-success-color);
          
          .action-text {
            font-size: 22rpx;
            color: var(--td-success-color);
            margin-left: 6rpx;
          }
        }
      }
    }
  }
  
  .empty-state {
    text-align: center;
    padding: 120rpx 60rpx;
    
    .empty-icon {
      margin-bottom: 32rpx;
      opacity: 0.6;
    }
    
    .empty-text {
      display: block;
      font-size: 30rpx;
      font-weight: 600;
      color: var(--td-gray-color-5);
      margin-bottom: 16rpx;
    }
    
    .empty-desc {
      display: block;
      font-size: 24rpx;
      color: var(--td-gray-color-4);
      line-height: 1.5;
    }
  }
  
  .loading-state {
    text-align: center;
    padding: 80rpx;
    
    .loading-text {
      display: block;
      font-size: 26rpx;
      color: var(--td-gray-color-4);
      margin-top: 16rpx;
    }
  }
}

/* 加载更多 */
.load-more {
  padding: 0 20rpx 40rpx;
  
  .load-more-btn {
    background: #ffffff;
    border-radius: var(--td-radius-large);
    padding: 32rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--td-shadow-1);
    transition: all 0.3s ease;
    
    &:active {
      transform: translateY(2rpx);
      box-shadow: var(--td-shadow-2);
    }
    
    .load-more-text {
      font-size: 28rpx;
      color: var(--td-brand-color);
      font-weight: 600;
      margin-left: 12rpx;
    }
  }
}
