<!--pages/user/user.wxml-->
<view class="user-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="user-header">
    <view class="user-info">
      <image class="user-avatar" src="{{userInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="user-name">{{userInfo.name || 'ç”¨æˆ·'}}</text>
        <text class="user-phone">{{userInfo.phone}}</text>
        <text class="user-role">ç¤¾åŒºç”¨æˆ·</text>
      </view>
    </view>
    <view class="user-actions">
      <view class="action-btn" bindtap="editProfile">
        <text class="action-text">ç¼–è¾‘</text>
      </view>
    </view>
  </view>

  <!-- ç¤¾åŒºä¿¡æ¯ -->
  <view class="community-info" wx:if="{{userCommunity}}">
    <view class="community-header">
      <text class="community-title">æ‰€å±žç¤¾åŒº</text>
    </view>
    <text class="community-name">{{userCommunity.name}}</text>
    <text class="community-address">{{userCommunity.address}}</text>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="user-menu">
    <view class="menu-item" bindtap="navigateTo" data-url="/pages/user/problem-list/problem-list">
      <view class="menu-icon">
        <text class="icon">ðŸ“‹</text>
      </view>
      <view class="menu-content">
        <text class="menu-title">é—®é¢˜åˆ—è¡¨</text>
        <text class="menu-desc">æŸ¥çœ‹ç¤¾åŒºçŽ¯å¢ƒé—®é¢˜</text>
      </view>
      <view class="menu-arrow">
        <text class="arrow">></text>
      </view>
    </view>

    <view class="menu-item" bindtap="navigateTo" data-url="/pages/user/upload-fix/upload-fix">
      <view class="menu-icon">
        <text class="icon">âœ…</text>
      </view>
      <view class="menu-content">
        <text class="menu-title">ä¸Šä¼ æ•´æ”¹</text>
        <text class="menu-desc">ä¸Šä¼ é—®é¢˜æ•´æ”¹ç…§ç‰‡</text>
      </view>
      <view class="menu-arrow">
        <text class="arrow">></text>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="user-stats">
    <view class="stats-title">
      <text class="title">æˆ‘çš„è´¡çŒ®</text>
    </view>
    
    <view class="stats-grid">
      <view class="stats-item">
        <text class="stats-number">{{userStats.reportedProblems}}</text>
        <text class="stats-label">ä¸ŠæŠ¥é—®é¢˜</text>
      </view>
      
      <view class="stats-item">
        <text class="stats-number">{{userStats.fixedProblems}}</text>
        <text class="stats-label">æ•´æ”¹é—®é¢˜</text>
      </view>
      
      <view class="stats-item">
        <text class="stats-number">{{userStats.pendingProblems}}</text>
        <text class="stats-label">å¾…æ•´æ”¹</text>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘æ´»åŠ¨ -->
  <view class="recent-activity">
    <view class="activity-header">
      <text class="activity-title">æœ€è¿‘æ´»åŠ¨</text>
      <text class="more-btn" bindtap="navigateTo" data-url="/pages/user/problem-list/problem-list">æ›´å¤š ></text>
    </view>
    
    <view class="activity-list">
      <view class="activity-item" wx:for="{{recentActivities}}" wx:key="id">
        <view class="activity-icon">
          <text class="icon">{{item.icon}}</text>
        </view>
        <view class="activity-content">
          <text class="activity-title">{{item.title}}</text>
          <text class="activity-desc">{{item.description}}</text>
          <text class="activity-time">{{item.time}}</text>
        </view>
        <view class="activity-status {{item.status}}">
          <text class="status-text">{{item.statusText}}</text>
        </view>
      </view>
      
      <view class="empty-state" wx:if="{{recentActivities.length === 0}}">
        <text class="empty-text">æš‚æ— æ´»åŠ¨è®°å½•</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>
</view>
